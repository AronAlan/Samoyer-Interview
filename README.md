# é¢è¯•ç†ŠğŸ»åˆ·é¢˜å¹³å° åç«¯å·¥ç¨‹

>ä½œè€…: Samoyer

>ä»…ç”¨äºäº¤æµä½¿ç”¨

>ä¸Šçº¿ç‰ˆæœ¬ï¼ˆåç»­åŠŸèƒ½æ›´æ–°ï¼‰ï¼šhttps://github.com/AronAlan/mianshixiong

### ä¸»æµæ¡†æ¶ & ç‰¹æ€§

- Spring Boot 2.7.x
- Spring MVC
- MyBatis + MyBatis Plus æ•°æ®è®¿é—®
- Spring Boot è°ƒè¯•å·¥å…·å’Œé¡¹ç›®å¤„ç†å™¨
- Spring AOP åˆ‡é¢ç¼–ç¨‹
- Spring Scheduler å®šæ—¶ä»»åŠ¡
- Spring äº‹åŠ¡æ³¨è§£

### æ•°æ®å­˜å‚¨

- MySQL æ•°æ®åº“
- Redis å†…å­˜æ•°æ®åº“
- Elasticsearch æœç´¢å¼•æ“

### å·¥å…·ç±»

- Easy Excel è¡¨æ ¼å¤„ç†
- Hutool å·¥å…·åº“
- Apache Commons Lang3 å·¥å…·ç±»
- Lombok æ³¨è§£

### ä¸šåŠ¡ç‰¹æ€§

- ä¸šåŠ¡ä»£ç ç”Ÿæˆå™¨
- Spring Session Redis åˆ†å¸ƒå¼ç™»å½•
- å…¨å±€è¯·æ±‚å“åº”æ‹¦æˆªå™¨
- å…¨å±€å¼‚å¸¸å¤„ç†å™¨
- è‡ªå®šä¹‰é”™è¯¯ç 
- å°è£…é€šç”¨å“åº”ç±»
- Swagger + Knife4j æ¥å£æ–‡æ¡£
- è‡ªå®šä¹‰æƒé™æ³¨è§£ + å…¨å±€æ ¡éªŒï¼ˆå·²åºŸå¼ƒï¼‰
- å…¨å±€è·¨åŸŸå¤„ç†
- é•¿æ•´æ•°ä¸¢å¤±ç²¾åº¦è§£å†³
- å¤šç¯å¢ƒé…ç½®
- Sa-tokenæƒé™æ ¡éªŒ + åŒç«¯ç™»å½•äº’æ–¥
- Nacosé…ç½®é»‘åå•IP
- Sentinelé™æµã€ç†”æ–­ã€é™çº§
- åŸºäºRedisçš„åˆ†çº§åçˆ¬è™«


## ä¸šåŠ¡åŠŸèƒ½

- ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æ³¨é”€ã€æ›´æ–°ã€æ£€ç´¢ã€æƒé™ç®¡ç†
- é¢˜ç›®åˆ›å»ºã€åˆ é™¤ã€ç¼–è¾‘ã€æ›´æ–°ã€æ•°æ®åº“æ£€ç´¢ã€ES çµæ´»æ£€ç´¢
- é¢˜ç›®æ”¶è—ã€å–æ¶ˆæ”¶è—ã€æ£€ç´¢å·²æ”¶è—é¢˜ç›®ï¼ˆæš‚æœªå®ç°ï¼‰
- é¢˜ç›®å…¨é‡åŒæ­¥ ESã€å¢é‡åŒæ­¥ ES å®šæ—¶ä»»åŠ¡
- è‡ªåŠ¨ç¼“å­˜çƒ­é—¨é¢˜åº“ã€é¢˜ç›®

### è‡ªåŠ¨ç¼“å­˜æœºåˆ¶
æœ¬é¡¹ç›®åŸºäºçƒ­ç‚¹keyæ¢æµ‹æ¡†æ¶äº¬ä¸œ`Hotkey`å®ç°è‡ªåŠ¨ç¼“å­˜çƒ­é—¨é¢˜åº“å’Œé¢˜ç›®

ä¸»è¦å®ç°çš„åŠŸèƒ½ï¼š
1. è®°å½•è®¿é—®ï¼šç”¨æˆ·æ¯è®¿é—®ä¸€æ¬¡é¢˜åº“ï¼Œç»Ÿè®¡æ¬¡æ•° +1
2. è®¿é—®ç»Ÿè®¡ï¼šç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…é¢˜åº“çš„è®¿é—®æ¬¡æ•°ã€‚
3. é˜ˆå€¼åˆ¤æ–­ï¼šè®¿é—®é¢‘ç‡è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ï¼Œå˜ä¸ºçƒ­ç‚¹æ•°æ®ã€‚
4. ç¼“å­˜æ•°æ®ï¼šç¼“å­˜çƒ­ç‚¹æ•°æ®
5. è·å–æ•°æ®ï¼šåç»­è®¿é—®æ—¶ï¼Œä»ç¼“å­˜ä¸­è·å–æ•°æ®


   ![äº¬ä¸œhotkeyæ¡†æ¶ç¤ºæ„å›¾.png](doc/äº¬ä¸œhotkeyæ¡†æ¶ç¤ºæ„å›¾.png)

### å•å…ƒæµ‹è¯•

- JUnit5 å•å…ƒæµ‹è¯•
- ç¤ºä¾‹å•å…ƒæµ‹è¯•ç±»

### æ¶æ„è®¾è®¡

- åˆç†åˆ†å±‚


## ç›¸å…³é…ç½®
### MySQL æ•°æ®åº“

1ï¼‰ä¿®æ”¹ `application.yml` çš„æ•°æ®åº“é…ç½®ï¼š

```yml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/my_db
    username: root
    password: 123456
```

### Redis åˆ†å¸ƒå¼ç™»å½•

1ï¼‰ä¿®æ”¹ `application.yml` çš„ Redis é…ç½®ï¼š

```yml
spring:
  redis:
    database: 1
    host: localhost
    port: 6379
    timeout: 5000
    password: 123456
```

2ï¼‰ä¿®æ”¹ `application.yml` ä¸­çš„ session å­˜å‚¨æ–¹å¼ï¼š

```yml
spring:
  session:
    store-type: redis
```

3ï¼‰ç§»é™¤ `MainApplication` ç±»å¼€å¤´ `@SpringBootApplication` æ³¨è§£å†…çš„ exclude å‚æ•°ï¼š

ä¿®æ”¹å‰ï¼š

```java
@SpringBootApplication(exclude = {RedisAutoConfiguration.class})
```

ä¿®æ”¹åï¼š


```java
@SpringBootApplication
```

### Elasticsearch æœç´¢å¼•æ“

ä¿®æ”¹ `application.yml` çš„ Elasticsearch é…ç½®ï¼š

```yml
spring:
  elasticsearch:
    uris: http://localhost:9200
    username: root
    password: 123456
```
### Nacosæ§åˆ¶å°é…ç½®é»‘åå•IP
```yaml
blackIpList:
- "1.1.1.1"
- "2.2.2.2"
```

### Hotkeyæ§åˆ¶å°é…ç½®çƒ­ç‚¹è§„åˆ™
```json
[
    {
    "duration": 600,
    "key": "bank_detail_",
    "prefix": true,
    "interval": 5,
    "threshold": 10,
    "desc": "çƒ­é—¨é¢˜åº“ç¼“å­˜"
    },
    {
    "duration": 600,
    "key": "question_detail_",
    "prefix": true,
    "interval": 5,
    "threshold": 10,
    "desc": "çƒ­é—¨é¢˜ç›®ç¼“å­˜"
    }
]
```

### Sentinel
cmd:
```java
java -Dserver.port=8131 -jar sentinel-dashboard-1.8.6.jar
```
powershell:
```java
java "-Dserver.port=8131" -jar sentinel-dashboard-1.8.6.jar
```

## å¯åŠ¨æ‰€éœ€
åˆ†åˆ«å¯åŠ¨ï¼š
1. MySQL
2. Elasticsearch
3. Etcd
4. Nacos
5. Redis
6. [Hotkey](https://gitee.com/jd-platform-opensource/hotkey)
(ä¿®æ”¹å„æ¨¡å—ä¸­çš„ç«¯å£åŠä¿¡æ¯ï¼Œæ‰§è¡Œ`dashboard/src/main/resources/sb.sql`,åˆ†åˆ«å¯åŠ¨`work`å’Œ`dashboard`)
7. æ·»åŠ å¯åŠ¨ç±»`MainApplication`çš„JVMå‚æ•°`-Dcsp.sentinel.dashboard.server=localhost:8131`
